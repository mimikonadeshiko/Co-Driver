#!/bin/zsh
MODEL="qwen2.5:7b-instruct-q4_K_M"
CURDIR=$(pwd)

query="$*"
[[ -z "$query" ]] && read -r "?説明またはコマンドや文章を入力: " query

prompt="あなたはシェルアシスタントです。
入力が既にコマンドの場合は、そのコマンドを意味を変えずに分かりやすく安全で効率的な形に改善してください。
入力が文章（説明）の場合は、その説明を元に適切な1行のシェルコマンドを生成してください。
どちらの場合もコードブロック記号や'''や\`\`\`は含めないでください。
カレントディレクトリは $CURDIR です。
入力: $query"

ollama run "$MODEL" "$prompt" | tr -d '\n'
